<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>snowman and trees</title>
    <meta name="description" content="Winter-themed AR scene with snowmen and trees">
    <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>

    <script>
      AFRAME.registerComponent('shadow-follower', {
        schema: { type: 'selector' },
        init() {
          this.el.object3D.renderOrder = -1;
        },
        tick() {
          if (!this.data) return;
          this.el.object3D.position.copy(this.data.object3D.position);
          this.el.object3D.position.y -= 0.001; 
          // we gotta do this to avoid z-fighting
        }
      });
    </script>
  </head>

  <body>
    <a-scene
      ar-hit-test="target: #winter-root"
      reflection="directionalLight: a-light[type=directional]"
      renderer="colorManagement: true; exposure: 1; toneMapping: ACESFilmic"
      shadow="type: pcfsoft"
      xr-mode-ui="XRMode: xr"
    >

      <a-light
        type="directional"
        position="1 1 1"
        intensity="1.6"
        light="castShadow: true">
      </a-light>

      <a-camera position="0 0.4 0" wasd-controls="acceleration: 10"></a-camera>

      <!-- Main AR content -->
      <a-entity id="winter-root" scale="0.2 0.2 0.2" position="0 0 -1">

        <!-- Snowman -->
        <a-entity id="snow-figure">
          <a-sphere position="0 0.63 -1" radius="0.62" material="color: #cfd2d3"></a-sphere>
          <a-sphere position="0 1.58 -1" radius="0.50" material="color: #cfd2d3"></a-sphere>
          <a-sphere position="0 2.32 -1" radius="0.38" material="color: #cfd2d3"></a-sphere>

          <!-- Nose -->
          <a-cylinder
            position="-0.02 2.36 -0.66"
            height="0.30"
            radius="0.02"
            material="color: #000000"
            rotation="80 0 20">
          </a-cylinder>
        </a-entity>

        <!-- Pine trees -->
        <a-entity id="tree-group">
          <a-entity position="3.2 0 -0.9">
            <a-cone height="1.8" radius-bottom="0.9" material="color: #008000" position="0 1.0 0"></a-cone>
            <a-cone height="1.6" radius-bottom="0.7" material="color: #008000" position="0 1.5 0"></a-cone>
            <a-cone height="1.4" radius-bottom="0.5" material="color: #008000" position="0 2.0 0"></a-cone>
            <a-cylinder height="0.6" radius="0.18" material="color: #964B00" position="0 -0.3 0"></a-cylinder>
          </a-entity>

          <a-entity position="-1.4 0 -0.7" rotation="0 15 0">
            <a-cone height="1.8" radius-bottom="0.9" material="color: #008000" position="0 1.0 0"></a-cone>
            <a-cone height="1.6" radius-bottom="0.7" material="color: #008000" position="0 1.5 0"></a-cone>
            <a-cone height="1.4" radius-bottom="0.5" material="color: #008000" position="0 2.0 0"></a-cone>
            <a-cylinder height="0.6" radius="0.18" material="color: #964B00" position="0 -0.3 0"></a-cylinder>
          </a-entity>
        </a-entity>

      </a-entity>

      <!-- Shadow receiver -->
      <a-plane
        shadow-follower="#winter-root"
        material="shader: shadow"
        shadow="cast: false"
        rotation="-90 0 0"
        width="2"
        height="2">
      </a-plane>

      <a-sky color="#ECECEC" hide-on-enter-ar></a-sky>
    </a-scene>
  </body>
</html>


